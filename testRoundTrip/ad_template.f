        subroutine template()
          use OpenAD_dct
          use OpenAD_tape
          use OpenAD_rev
          use OpenAD_checkpoints

          ! original arguments get inserted before version
          ! and declared here together with all local variables
          ! generated by xaifBooster

!$TEMPLATE_PRAGMA_DECLARATIONS


          ! checkpointing stacks and offsets
          integer, parameter :: theMaxStackSize=200
          integer :: cp_loop_variable
          double precision, dimension(theMaxStackSize), save :: 
     +theArgStack
          integer, save :: theArgStackoffset=0
          double precision, dimension(theMaxStackSize), save :: 
     +theResStack
          integer, save :: theResStackoffset=0
          integer, dimension(theMaxStackSize), save :: 
     +theArgIStack
          integer, save :: theArgIStackoffset=0
          integer, dimension(theMaxStackSize), save :: 
     +theResIStack
          integer, save :: theResIStackoffset=0

	  ! call external C function used in inlined code
	  integer iaddr
          external iaddr
          call tape_init

          if (our_rev_mode%arg_store) then 
! store arguments
!$PLACEHOLDER_PRAGMA$ id=4
          end if 
          if (our_rev_mode%arg_restore) then
! restore arguments
!$PLACEHOLDER_PRAGMA$ id=6
          end if
          if (our_rev_mode%plain) then
! original function
!$PLACEHOLDER_PRAGMA$ id=1
          end if 
          if (our_rev_mode%tape) then
! original function
!$PLACEHOLDER_PRAGMA$ id=2
          end if 
          if (our_rev_mode%res_store) then
! store results
!$PLACEHOLDER_PRAGMA$ id=5
          end if 
          if (our_rev_mode%res_restore) then
! restore results
!$PLACEHOLDER_PRAGMA$ id=7
          end if 
          if (our_rev_mode%adjoint) then
! adjoint
!$PLACEHOLDER_PRAGMA$ id=3
          end if 
        end subroutine template
